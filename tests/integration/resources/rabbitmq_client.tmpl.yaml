---
apiVersion: v1
kind: Pod
metadata:
  name: rabbitmq-client
spec:
  containers:
  - name: rabbitmq-client
    image: rabbitmqapp:latest
    imagePullPolicy: Never
    env:
    - name: DATABASE_URI
      valueFrom:
        secretKeyRef:
          name: {{ .SecretName }}
          key: uri
    - name: PORT
      value: "8080"
    readinessProbe:
      httpGet:
        port: 8080
      initialDelaySeconds: 5
      periodSeconds: 1
  restartPolicy: Never
